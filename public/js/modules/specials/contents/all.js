const settingEditor={image:{class:SimpleImage,inlineToolbar:!0,config:{placeholder:"Ingresar la url"}},table:Table,paragraph:{class:Paragraph,inlineToolbar:!0},Marker:{class:Marker,shortcut:"CMD+SHIFT+M"},header:{class:Header,shortcut:"CMD+SHIFT+H"},raw:RawTool,checklist:{class:Checklist,inlineToolbar:!0},list:{class:List,inlineToolbar:!0,config:{defaultStyle:"unordered"}},embed:{class:Embed,config:{services:{youtube:!0,coub:!0,codepen:{regex:/https?:\/\/codepen.io\/([^\/\?\&]*)\/pen\/([^\/\?\&]*)/,embedUrl:"https://codepen.io/<%= remote_id %>?height=300&theme-id=0&default-tab=css,result&embed-version=2",html:"<iframe height='300' scrolling='no' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'></iframe>",height:300,width:1200,id:e=>e.join("/embed/")}}}}};let buttonSaveContent=document.getElementById("special-btn-save");function ActionSaveContent(e){let t=JSON.stringify(e);SaveContent.var.content=encodeURIComponent(t),SaveContent.Send()}buttonSaveContent.addEventListener("click",(function(){overlayContent.show(),editorContent.save().then((e=>{ActionSaveContent(e)})).catch((e=>{notify(!1,"Saving failed:",e,1),overlayContent.hide()}))}));let SaveContent=new QueryAjax({url:"/admin/specials/${slug}/contents",method:"PUT",action:"AfterSaveContent"});function AfterSaveContent(e){e&&notify(!1,"Contenido Actualizado","",2),overlayContent.hide()}let divUpdate=$("#div-update-main"),formUpdateMain=$("form[name=form-update-main]"),selectLanguage=divUpdate.find("select[name=language_id]"),overlayContent=divUpdate.find(".overlay");var editorContent=new EditorJS({holder:"editorjs",tools:settingEditor});function ActionMainUpdate(){overlayContent.show(),UtilClearFormUi(formUpdateMain);let e=$("#slug").val();queryInitialUpdateMain.url=`/admin/specials/${e}/contents/update`,queryInitialUpdateMain.var.language_id=selectLanguage.val(),queryInitialUpdateMain.Send(),SaveContent.url=`/admin/specials/${e}/contents`,SaveContent.var.language_id=selectLanguage.val()}let queryInitialUpdateMain=new QueryAjax({url:"/admin/specials/{slug}/contents/update",method:"GET",action:"UpdateActionModal"});function UpdateActionModal(e,t){e&&t.status&&(UtilFormClose(formUpdateMain),LoadFormInputs(divUpdate,t.data.content),$("#editorjs").html(),editorContent.destroy(),editorContent=t.data.content.content?new EditorJS({holder:"editorjs",tools:settingEditor,data:JSON.parse(decodeURIComponent(t.data.content.content))}):new EditorJS({holder:"editorjs",tools:settingEditor})),overlayContent.hide()}selectLanguage.change((function(){ActionMainUpdate()})),ActionMainUpdate();
