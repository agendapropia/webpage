let div=$("#tableRoles"),route="/admin/accounts/roles/list",structure=[" ","Nombre","Description","guard_name"];var roleTable=new tableGear(div,route,structure);roleTable.filter.status="",roleTable.refresh(!0);let modalAssignPermissions=$("#modal-assign-permissions"),formAssignPermissions=$("form[name=form-assign-permissions]");function AssignPermissions(e){modalAssignPermissions.find(".name_role").text(e.name),assignPermissionTable.form.url="/admin/accounts/roles/"+e.id+"/permissions",SendPermissionAssign.url="/admin/accounts/roles/"+e.id+"/assign",assignPermissionTable.refresh(!1)}let structure_array=[" ","Nombre","Description","Módulo"];var assignPermissionTable=new tableGear($("#assign-permissions"),"/admin/accounts/roles/_role_/permissions",structure_array,"selectedDataPermission");function selectedDataPermission(e){assignPermissionTable.CheckboxSelect(!1),assignPermissionTable.CheckboxArraySelect("role",1)}function SendDataPermissionsRoles(){let e=[],s=[];$.each(assignPermissionTable.data_complete.data.data,(function(o,i){1==i.role?-1==jQuery.inArray(i.id,assignPermissionTable.checks)&&e.push(i.id):-1!=jQuery.inArray(i.id,assignPermissionTable.checks)&&s.push(i.id)})),e.length||s.length?(SendPermissionAssign.var.remove=e,SendPermissionAssign.var.add=s,SendPermissionAssign.Send()):SendPermissionAssign.FormClose()}assignPermissionTable.tablePaginate=!1,assignPermissionTable.filter.row=200,assignPermissionTable.modalSelect=modalAssignPermissions;let SendPermissionAssign=new QueryAjax({url:"/admin/accounts/roles/_role_/assign",method:"POST",action:"FinishAssignPermission",listTable:assignPermissionTable});function FinishAssignPermission(e,s){e&&(notify(!1,"Permisos Actualizado","Operación realizada exitosamente",2),SendPermissionAssign.FormClose())}let modalCreateRoles=$("#modal-create-roles"),formCreateRoles=$("form[name=form-create-role]");function CreateRole(){roleTable.ModalClearForm(formCreateRoles)}let SendCreateRole=new QueryAjax({form:"form-create-role",action:"RoleCreateAction",listTable:roleTable});function RoleCreateAction(e,s){e&&(notify(!1,"Role creado","Role creado exitosamente.",2),SendCreateRole.FormClose(),roleTable.refresh())}let modalUpdateRoles=$("#modal-update-roles"),formUpdateRoles=$("form[name=form-update-roles]");function UpdateRoles(e){roleTable.ModalClearForm(formUpdateRoles),LoadFormInputs(modalUpdateRoles,e),formUpdateRoles.find("input[name=id]").val(e.id)}let SendRolesUpdate=new QueryAjax({form:"form-update-roles",action:"RolesUpdateAction",listTable:roleTable});function RolesUpdateAction(e,s){e&&(notify(!1,"Role Actualizado","Operación realizada exitosamente",2),SendRolesUpdate.FormClose(),roleTable.refresh())}
